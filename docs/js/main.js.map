{
  "version": 3,
  "sources": ["../../src/js/index.js"],
  "sourcesContent": ["class BaseCustomElement extends HTMLElement {\n\n  #domLoaded\n  #onDOMLoaded\n\n  constructor() {\n    super()\n    this.#domLoaded = false\n    this.#onDOMLoaded = () => {\n      this.#domLoaded = true\n      this.#_render()\n    }\n  }\n\n  connectedCallback() {\n    document.addEventListener(\"DOMContentLoaded\", this.#onDOMLoaded)\n    if (this.onConnected) {\n      this.onConnected()\n    }\n    this.#_render()\n  }\n\n  #_render() {\n    if (!this.#domLoaded) {\n      return\n    }\n    if (this.render)  {\n      this.render()\n    }\n  }\n}\n\nclass HomescreenNotification extends BaseCustomElement {\n\n  #dismiss\n\n  constructor() {\n    super()\n        window.localStorage.removeItem(\"seenHomeScreenMessage\")\n    this.#dismiss = (event) => {\n      event.preventDefault()\n      this.style.display = \"none\"\n      if (window.localStorage) {\n        window.localStorage.setItem(\"seenHomeScreenMessage\",\"true\")\n      }\n    }\n  }\n\n  onConnected() {\n    this.style.display = \"none\"\n  }\n\n  render() {\n    const button = this.querySelector(\"button\")\n\n    const isAddedToHomeScreen = window.matchMedia(\"(display-mode: standalone)\").matches\n    const isLikelyMobile      = window.matchMedia(\"(max-width: 30em)\").matches\n    const seenMessage         = window.localStorage && \n                                window.localStorage.getItem(\"seenHomeScreenMessage\") == \"true\"\n\n    const showHomeScreenMessage = (!seenMessage && isLikelyMobile && !isAddedToHomeScreen)\n\n    if (showHomeScreenMessage) {\n      this.style.display = \"block\"\n    }\n\n    button.addEventListener(\"click\",this.#dismiss)\n  }\n}\n\nclass PWADetection extends BaseCustomElement {\n\n  render() {\n    const isAddedToHomeScreen = window.matchMedia(\"(display-mode: standalone)\").matches\n    this.querySelectorAll(\"[data-if-not-pwa]\").forEach( (element) => {\n      if (isAddedToHomeScreen) {\n        element.style.display = \"none\"\n      }\n      else {\n        element.style.display = \"block\"\n      }\n    })\n    this.querySelectorAll(\"[data-if-pwa]\").forEach( (element) => {\n      if (isAddedToHomeScreen) {\n        element.style.display = \"block\"\n      }\n      else {\n        element.style.display = \"none\"\n      }\n    })\n\n  }\n}\n\nclass ReloadPage extends BaseCustomElement {\n\n  #reloadPage\n\n  constructor() {\n    super()\n    this.#reloadPage = (event) => {\n      event.preventDefault()\n      window.location.reload()\n    }\n  }\n  render() {\n    this.querySelector(\"button\").addEventListener(\"click\", this.#reloadPage)\n  }\n}\n\nclass BPMCalc extends BaseCustomElement {\n  #updateCalculations\n  #submitForm\n\n  constructor() {\n    super()\n    this.#submitForm = (event) => {\n      event.preventDefault()\n      const input = event.currentTarget.querySelector(\"input[name=bpm]\")\n      if (input) {\n        this.#calculate(input.value)\n      }\n    }\n    this.#updateCalculations = (event) => {\n      if (event.currentTarget.value) {\n        this.#calculate(event.currentTarget.value)\n      }\n      else {\n        this.#clearAll()\n      }\n    }\n  }\n\n  render() {\n    const input = this.querySelector(\"input[name=bpm]\")\n    if (input) {\n      if (input.value) {\n        this.#calculate(input.value)\n      }\n      else {\n        this.#clearAll()\n      }\n      input.addEventListener(\"input\", this.#updateCalculations)\n      input.focus()\n    }\n    else {\n      this.#clearAll()\n    }\n    const form = this.querySelector(\"form\")\n    if (form) {\n      form.addEventListener(\"submit\", this.#submitForm)\n      form.querySelectorAll(\"input[type=submit]\").forEach( (element) => {\n        element.style.display = \"none\"\n      })\n    }\n  }\n\n  #calculate(value) {\n    const bpm = Number(value)\n    if (isNaN(bpm)) {\n      this.#clearAll()\n      return\n    }\n    this.querySelectorAll(\"[data-note]\").forEach( (element) => {\n      const divisor = Number(element.dataset.note)\n      if (!isNaN(divisor)) {\n        const ms = (60000 / bpm) / divisor\n        element.textContent = ms.toLocaleString(undefined,{ minimumFractionDigits: 0, maximumFractionDigits: 0, useGrouping: false })\n      }\n      else {\n        console.warn(\"%o's data-note was not a number: %s\",element,element.dataset.note)\n      }\n    })\n  }\n\n  #clearAll() {\n    this.querySelectorAll(\"[data-note]\").forEach( (element) => {\n      element.textContent = \"\"\n    })\n  }\n}\n\n\ncustomElements.define(\"synth-homescreen-notification\",HomescreenNotification)\ncustomElements.define(\"synth-pwa-detection\",PWADetection)\ncustomElements.define(\"synth-reload\",ReloadPage)\ncustomElements.define(\"synth-bpm-calc\",BPMCalc)\n"],
  "mappings": "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",
  "names": ["BaseCustomElement", "#domLoaded", "#onDOMLoaded", "#_render", "HomescreenNotification", "#dismiss", "event", "button", "isAddedToHomeScreen", "isLikelyMobile", "PWADetection", "element", "ReloadPage", "#reloadPage", "BPMCalc", "#updateCalculations", "#submitForm", "input", "#calculate", "#clearAll", "form", "value", "bpm", "divisor", "ms"]
}
